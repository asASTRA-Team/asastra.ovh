class TextScramble{constructor(a){this.el=a,this.chars="!<>-_\\/[]{}\u2014=+*^?#________",this.update=this.update.bind(this)}setText(a){const b=this.el.innerText,c=Math.max(b.length,a.length),d=new Promise(a=>this.resolve=a);this.queue=[];for(let d=0;d<c;d++){const c=b[d]||"",e=a[d]||"",f=Math.floor(40*Math.random()),g=f+Math.floor(40*Math.random());this.queue.push({from:c,to:e,start:f,end:g})}return cancelAnimationFrame(this.frameRequest),this.frame=0,this.update(),d}update(){let a="",b=0;for(let c=0,d=this.queue.length;c<d;c++){let{from:d,to:e,start:f,end:g,char:h}=this.queue[c];this.frame>=g?(b++,a+=e):this.frame>=f?((!h||.28>Math.random())&&(h=this.randomChar(),this.queue[c].char=h),a+=`<span class="dud">${h}</span>`):a+=d}this.el.innerHTML=a,b===this.queue.length?this.resolve():(this.frameRequest=requestAnimationFrame(this.update),this.frame++)}randomChar(){return this.chars[Math.floor(Math.random()*this.chars.length)]}}const phrases=["Carl,","sooner or later","something's going to happen here","but definitely not now","and not later","and not ever..."],el=document.querySelector(".text"),fx=new TextScramble(el);let counter=0;const next=()=>{fx.setText(phrases[counter]).then(()=>{setTimeout(next,800)}),counter=(counter+1)%phrases.length};next();